!function(a,b,c){"use strict";b.module("ngResource",["ng"]).factory("$resource",["$http","$parse",function(a,d){function e(a){return f(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function f(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function g(a,b){this.template=a+="#",this.defaults=b||{};var c=this.urlParams={};k(a.split(/\W/),function(b){b&&new RegExp("(^|[^\\\\]):"+b+"\\W").test(a)&&(c[b]=!0)}),this.template=a.replace(/\\:/g,":")}function h(d,e,f){function p(a,b){var c={};return b=l({},e,b),k(b,function(b,d){c[d]=b.charAt&&"@"==b.charAt(0)?o(a,b.substr(1)):b}),c}function q(a){m(a||{},this)}var r=new g(d);return f=l({},i,f),k(f,function(d,e){d.method=b.uppercase(d.method);var f="POST"==d.method||"PUT"==d.method||"PATCH"==d.method;q[e]=function(b,c,e,g){var h,i={},o=j,s=null;switch(arguments.length){case 4:s=g,o=e;case 3:case 2:if(!n(c)){i=b,h=c,o=e;break}if(n(b)){o=b,s=c;break}o=c,s=e;case 1:n(b)?o=b:f?h=b:i=b;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}var t=this instanceof q?this:d.isArray?[]:new q(h);return a({method:d.method,url:r.url(l({},p(h,d.params||{}),i)),data:h}).then(function(a){var b=a.data;b&&(d.isArray?(t.length=0,k(b,function(a){t.push(new q(a))})):m(b,t)),(o||j)(t,a.headers)},s),t},q.prototype["$"+e]=function(a,b,d){var g,h=p(this),i=j;switch(arguments.length){case 3:h=a,i=b,g=d;break;case 2:case 1:n(a)?(i=a,g=b):(h=a,i=b||j);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}var k=f?this:c;q[e].call(this,h,k,i,g)}}),q.bind=function(a){return h(d,l({},e,a),f)},q}var i={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},j=b.noop,k=b.forEach,l=b.extend,m=b.copy,n=b.isFunction,o=function(a,b){return d(b)(a)};return g.prototype={url:function(a){var c,d,g=this,h=this.template;a=a||{},k(this.urlParams,function(f,i){c=a.hasOwnProperty(i)?a[i]:g.defaults[i],b.isDefined(c)&&null!==c?(d=e(c),h=h.replace(new RegExp(":"+i+"(\\W)","g"),d+"$1")):h=h.replace(new RegExp("(/?):"+i+"(\\W)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h=h.replace(/\/?#$/,"");var i=[];return k(a,function(a,b){g.urlParams[b]||i.push(f(b)+"="+f(a))}),i.sort(),h=h.replace(/\/*$/,""),h+(i.length?"?"+i.join("&"):"")}},h}])}(window,window.angular),angular.module("goeswebApp").controller("SlideshowCtrl",["$scope","goesService",function(a,b){var c=3e3,d=1,e=10;a.slides=b.getSlides(),a.variables=b.getVariables(),a.selectedVariable=a.variables[0],a.startDate,a.endDate,a.state={interval:c},a.updateInterval=function(){a.state.interval=d<=a.newInterval&&a.newInterval<=e?1e3*a.newInterval:c},a.generateSlideshow=function(){a.slides=b.getSlides(a.selectedVariable,a.startDate,a.endDate)}}]),angular.module("goeswebApp").controller("NavigationCtrl",["$scope","$location",function(a,b){a.nav={},a.nav.links=[{fragment:"#/",text:"Home"},{fragment:"#/slideshow",text:"Slideshow"},{fragment:"#/timeseries",text:"Timeseries"}],a.isActive=function(a){return b.path()==a.substring(1)}}]),angular.module("goeswebApp").factory("goesService",function(){var a={};return a.getSlides=function(){return[{image:"http://academic.uprm.edu/hdc/GOES-PRWEB_RESULTS/actual_ET/actual_ET20090101.jpg",active:!0},{image:"http://academic.uprm.edu/hdc/GOES-PRWEB_RESULTS/actual_ET/actual_ET20090102.jpg",active:!1},{image:"http://academic.uprm.edu/hdc/GOES-PRWEB_RESULTS/actual_ET/actual_ET20090103.jpg",active:!1},{image:"http://academic.uprm.edu/hdc/GOES-PRWEB_RESULTS/actual_ET/actual_ET20090104.jpg",active:!1},{image:"http://academic.uprm.edu/hdc/GOES-PRWEB_RESULTS/actual_ET/actual_ET20090105.jpg",active:!1}]},a.getVariables=function(){return["actual_ET","rainfall","runoff","aquifer_recharge","soil_moisture","reference_ET","crop_coefficient","crop_stress_coefficient","wind_speed","solar_radiation","net_radiation","average_air_temperature","minimum_air_temperature","maximum_air_temperature","effective_surface_temperature","saturated_vapor_pressure","actual_vapor_pressure","relative_humidity","surface_resistance","aerodynamic_resistance","latent_heat_flux","sensible_heat_flux","non_transient_variables","soil_saturation","bowen_ratio"].sort()},a.getTimeseries=function(a){for(var b=[],c=0;365>c;c++)b.push(100*Math.random());return{name:a,data:b}},a}),angular.module("goeswebApp").controller("TimeseriesCtrl",["$scope",function(){}]),angular.module("goeswebApp").directive("timeseries",["goesService",function(){return{templateUrl:"scripts/directives/timeseries.html",restrict:"E",replace:!0,controller:["$scope","goesService",function(a,b){var c={type:"line",name:a.selectedVariable,pointInterval:864e5,pointStart:Date.UTC(2013,0,1),data:b.getTimeseries().data};a.variables=b.getVariables(),a.selectedVariable=a.variables[0],a.mapOptions={center:new google.maps.LatLng(18.22079,-66.59011),zoom:9,mapTypeId:google.maps.MapTypeId.SATELLITE},a.toggleLoading=function(){this.chartConfig.loading=!this.chartConfig.loading},a.chartConfig={chart:{zoomType:"x",spacingRight:20},title:{text:a.selectedVariable},subtitle:{text:void 0===document.ontouchstart?"Click and drag in the plot area to zoom in":"Pinch the chart to zoom in"},xAxis:{type:"datetime",maxZoom:12096e5,title:{text:null}},yAxis:{title:{text:""}},tooltip:{shared:!0},legend:{enabled:!1},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},lineWidth:1,marker:{enabled:!1},shadow:!1,states:{hover:{lineWidth:1}},threshold:null}},series:[c],loading:!1},a.generateTimeseries=function(){console.log("calling"),a.chartConfig.title.text=a.selectedVariable,a.chartConfig.series.pop(),c.data=b.getTimeseries().data,a.chartConfig.series.push(c)}}],link:function(a,b){var c=$(window).innerHeight()-$(".navbar").innerHeight()-20,d=$(b);d.find(".map").innerHeight(c)}}}]);